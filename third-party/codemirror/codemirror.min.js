var CodeMirror=function(){function e(n,r){var i={},h=e.defaults;for(var m in h)if(h.hasOwnProperty(m))i[m]=(r&&r.hasOwnProperty(m)?r:h)[m];var b=i["document"];var A=b.createElement("div");A.className="CodeMirror"+(i.lineWrapping?" CodeMirror-wrap":"");A.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;">'+'<textarea style="position: absolute; padding: 0; width: 1px;" wrap="off" '+'autocorrect="off" autocapitalize="off"></textarea></div>'+'<div class="CodeMirror-scroll" tabindex="-1">'+'<div style="position: relative">'+'<div style="position: relative">'+'<div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div>'+'<div class="CodeMirror-lines"><div style="position: relative">'+'<div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"></div>'+'<pre class="CodeMirror-cursor">&#160;</pre>'+"<div></div>"+"</div></div></div></div></div>";if(n.appendChild)n.appendChild(A);else n(A);var R=A.firstChild,P=R.firstChild,U=A.lastChild,Q=U.firstChild,ee=Q.firstChild,te=ee.firstChild,ne=te.firstChild,re=te.nextSibling.firstChild,ie=re.firstChild,le=ie.nextSibling,oe=le.nextSibling;qt();if(/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent))P.style.width="0px";if(!O)re.draggable=true;if(i.tabindex!=null)P.tabIndex=i.tabindex;if(!i.gutter&&!i.lineNumbers)te.style.display="none";try{ln("x")}catch(e){if(e.message.match(/runtime/i))e=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)");throw e}var ae=new N,fe=new N,ue;var se,ce=new x([new g([new p("")])]),he,de;Ft();var ve={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false};var pe,me,ge,xe,ye=false;var ke,we,Ce,Me,be,Se,Le,Ae;var ze=0,Te=0,Ee=0,We=0;var Ne;var He="",De,Ie=Yt();Dn(function(){Ke(i.value||"");ke=false})();var Oe=new M;W(U,"mousedown",Dn(je));W(U,"dblclick",Dn(Ge));W(re,"dragstart",_e);W(re,"selectstart",L);if(!D)W(U,"contextmenu",Cn);W(U,"scroll",function(){Ct([]);if(i.fixedGutter)te.style.left=U.scrollLeft+"px";if(i.onScroll)i.onScroll(Ue)});W(window,"resize",function(){Ct(true)});W(P,"keyup",Dn(Je));W(P,"input",dt);W(P,"keydown",Dn($e));W(P,"keypress",Dn(Ze));W(P,"focus",Qe);W(P,"blur",et);W(U,"dragenter",z);W(U,"dragover",z);W(U,"drop",Dn(Ye));W(U,"paste",function(){gt();dt()});W(P,"paste",dt);W(P,"cut",Dn(function(){at("")}));var Re;try{Re=b.activeElement==P}catch(e){}if(Re)setTimeout(Qe,20);else et();function Pe(e){return e>=0&&e<ce.size}var Ue=A.CodeMirror={getValue:Fe,setValue:Dn(Ke),getSelection:st,replaceSelection:Dn(at),focus:function(){gt();Qe();dt()},setOption:function(e,t){var n=i[e];i[e]=t;if(e=="mode"||e=="indentUnit")Ft();else if(e=="readOnly"&&t){et();P.blur()}else if(e=="theme")qt();else if(e=="lineWrapping"&&n!=t)Dn(Gt)();else if(e=="tabSize")Dn(_t)();if(e=="lineNumbers"||e=="gutter"||e=="firstLineNumber"||e=="theme")Dn(jt)()},getOption:function(e){return i[e]},undo:Dn(rt),redo:Dn(it),indentLine:Dn(function(e,t){if(Pe(e))Kt(e,t==null?"smart":t?"add":"subtract")}),indentSelection:Dn(Vt),historySize:function(){return{undo:Oe.done.length,redo:Oe.undone.length}},clearHistory:function(){Oe=new M},matchBrackets:Dn(function(){Sn(true)}),getTokenAt:Dn(function(e){e=Ht(e);return Be(e.line).getTokenAt(se,An(e.line),e.ch)}),getStateAfter:function(e){e=Nt(e==null?ce.size-1:e);return An(e+1)},cursorCoords:function(e){if(e==null)e=ve.inverted;return cn(e?ve.from:ve.to)},charCoords:function(e){return cn(Ht(e))},coordsChar:function(e){var t=B(re);return sn(e.x-t.left,e.y-t.top)},markText:Dn($t),setBookmark:Zt,setMarker:Dn(Jt),clearMarker:Dn(Qt),setLineClass:Dn(tn),hideLine:Dn(function(e){return nn(e,true)}),showLine:Dn(function(e){return nn(e,false)}),onDeleteLine:function(e,t){if(typeof e=="number"){if(!Pe(e))return null;e=Be(e)}(e.handlers||(e.handlers=[])).push(t);return e},lineInfo:rn,addWidget:function(e,t,n,r,i){e=un(Ht(e));var l=e.yBot,o=e.x;t.style.position="absolute";Q.appendChild(t);if(r=="over")l=e.y;else if(r=="near"){var a=Math.max(U.offsetHeight,ce.height*pn()),f=Math.max(Q.clientWidth,re.clientWidth)-kn();if(e.yBot+t.offsetHeight>a&&e.y>t.offsetHeight)l=e.y-t.offsetHeight;if(o+t.offsetWidth>f)o=f-t.offsetWidth}t.style.top=l+yn()+"px";t.style.left=t.style.right="";if(i=="right"){o=Q.clientWidth-t.offsetWidth;t.style.right="0px"}else{if(i=="left")o=0;else if(i=="middle")o=(Q.clientWidth-t.offsetWidth)/2;t.style.left=o+kn()+"px"}if(n)kt(o,l,o+t.offsetWidth,l+t.offsetHeight)},lineCount:function(){return ce.size},clipPos:Ht,getCursor:function(e){if(e==null)e=ve.inverted;return j(e?ve.from:ve.to)},somethingSelected:function(){return!K(ve.from,ve.to)},setCursor:Dn(function(e,t,n){if(t==null&&typeof e.line=="number")Wt(e.line,e.ch,n);else Wt(e,t,n)}),setSelection:Dn(function(e,t,n){(n?zt:Tt)(Ht(e),Ht(t||e))}),getLine:function(e){if(Pe(e))return Be(e).text},getLineHandle:function(e){if(Pe(e))return Be(e)},setLine:Dn(function(e,t){if(Pe(e))ot(t,{line:e,ch:0},{line:e,ch:Be(e).text.length})}),removeLine:Dn(function(e){if(Pe(e))ot("",{line:e,ch:0},Ht({line:e+1,ch:0}))}),replaceRange:Dn(ot),getRange:function(e,t){return ut(Ht(e),Ht(t))},execCommand:function(e){return o[e](Ue)},moveH:Dn(It),deleteH:Dn(Ot),moveV:Dn(Pt),toggleOverwrite:function(){ye=!ye},posFromIndex:function(e){var t=0,n;ce.iter(0,ce.size,function(r){var i=r.text.length+1;if(i>e){n=e;return true}e-=i;++t});return Ht({line:t,ch:n})},indexFromPos:function(e){if(e.line<0||e.ch<0)return 0;var t=e.ch;ce.iter(0,e.line,function(e){t+=e.text.length+1});return t},operation:function(e){return Dn(e)()},refresh:function(){Ct(true)},getInputField:function(){return P},getWrapperElement:function(){return A},getScrollerElement:function(){return U},getGutterElement:function(){return te}};function Be(e){return y(ce,e)}function Ve(e,t){Le=true;var n=t-e.height;for(var r=e;r;r=r.parent)r.height+=n}function Ke(e){var t={line:0,ch:0};tt(t,{line:ce.size-1,ch:Be(ce.size-1).text.length},$(e),t,t);ke=true}function Fe(e){var t=[];ce.iter(0,ce.size,function(e){t.push(e.text)});return t.join("\n")}function je(e){At(e.shiftKey);for(var n=T(e);n!=A;n=n.parentNode)if(n.parentNode==Q&&n!=ee)return;for(var n=T(e);n!=A;n=n.parentNode)if(n.parentNode==ne){if(i.onGutterClick)i.onGutterClick(Ue,q(ne.childNodes,n)+Te,e);return L(e)}var r=wn(e);switch(E(e)){case 3:if(D&&!t)Cn(e);return;case 2:if(r)Wt(r.line,r.ch,true);return}if(!r){if(T(e)==U)L(e);return}if(!de)Qe();var l=+new Date;if(ge&&ge.time>l-400&&K(ge.pos,r)){L(e);setTimeout(gt,20);return Bt(r.line)}else if(me&&me.time>l-400&&K(me.pos,r)){ge={time:l,pos:r};L(e);return Ut(r)}else{me={time:l,pos:r}}var o=r,a;if(H&&!K(ve.from,ve.to)&&!F(r,ve.from)&&!F(ve.to,r)){if(O)re.draggable=true;var f=W(b,"mouseup",Dn(function(t){if(O)re.draggable=false;xe=false;f();if(Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10){L(t);Wt(r.line,r.ch,true);gt()}}),true);xe=true;return}L(e);Wt(r.line,r.ch,true);function u(e){var t=wn(e,true);if(t&&!K(t,o)){if(!de)Qe();o=t;zt(r,t);ke=false;var n=wt();if(t.line>=n.to||t.line<n.from)a=setTimeout(Dn(function(){u(e)}),150)}}var s=W(b,"mousemove",Dn(function(e){clearTimeout(a);L(e);u(e)}),true);var f=W(b,"mouseup",Dn(function(e){clearTimeout(a);var t=wn(e);if(t)zt(r,t);L(e);gt();ke=true;s();f()}),true)}function Ge(e){for(var t=T(e);t!=A;t=t.parentNode)if(t.parentNode==ne)return L(e);var n=wn(e);if(!n)return;ge={time:+new Date,pos:n};L(e);Ut(n)}function Ye(e){e.preventDefault();var t=wn(e,true),n=e.dataTransfer.files;if(!t||i.readOnly)return;if(n&&n.length&&window.FileReader&&window.File){function r(e,n){var r=new FileReader;r.onload=function(){o[n]=r.result;if(++a==l){t=Ht(t);Dn(function(){var e=ot(o.join(""),t,t);zt(t,e)})()}};r.readAsText(e)}var l=n.length,o=Array(l),a=0;for(var f=0;f<l;++f)r(n[f],f)}else{try{var o=e.dataTransfer.getData("Text");if(o){var u=ot(o,t,t);var s=ve.from,c=ve.to;zt(t,u);if(xe)ot("",s,c);gt()}}catch(e){}}}function _e(e){var t=st();Y(t);e.dataTransfer.setDragImage(G,0,0);e.dataTransfer.setData("Text",t)}function qe(e){var t=J[e.keyCode],n=a[i.keyMap].auto,r,l;if(t==null||e.altGraphKey){if(n)i.keyMap=n;return null}if(e.altKey)t="Alt-"+t;if(e.ctrlKey)t="Ctrl-"+t;if(e.metaKey)t="Cmd-"+t;if(e.shiftKey&&(r=f("Shift-"+t,i.extraKeys,i.keyMap))){l=true}else{r=f(t,i.extraKeys,i.keyMap)}if(typeof r=="string"){if(o.propertyIsEnumerable(r))r=o[r];else r=null}if(n&&(r||!u(e)))i.keyMap=n;if(!r)return false;if(l){var s=pe;pe=null;r(Ue);pe=s}else r(Ue);L(e);return true}var Xe=null;function $e(e){if(!de)Qe();var n=e.keyCode;if(I&&n==27){e.returnValue=false}At(n==16||e.shiftKey);if(i.onKeyEvent&&i.onKeyEvent(Ue,S(e)))return;var r=qe(e);if(window.opera){Xe=r?e.keyCode:null;if(!r&&(t?e.metaKey:e.ctrlKey)&&e.keyCode==88)at("")}}function Ze(e){if(window.opera&&e.keyCode==Xe){Xe=null;L(e);return}if(i.onKeyEvent&&i.onKeyEvent(Ue,S(e)))return;if(window.opera&&!e.which&&qe(e))return;if(i.electricChars&&se.electricChars){var t=String.fromCharCode(e.charCode==null?e.keyCode:e.charCode);if(se.electricChars.indexOf(t)>-1)setTimeout(Dn(function(){Kt(ve.to.line,"smart")}),75)}dt()}function Je(e){if(i.onKeyEvent&&i.onKeyEvent(Ue,S(e)))return;if(e.keyCode==16)pe=null}function Qe(){if(i.readOnly)return;if(!de){if(i.onFocus)i.onFocus(Ue);de=true;if(A.className.search(/\bCodeMirror-focused\b/)==-1)A.className+=" CodeMirror-focused";if(!Se)mt(true)}ht();Mn()}function et(){if(de){if(i.onBlur)i.onBlur(Ue);de=false;A.className=A.className.replace(" CodeMirror-focused","")}clearInterval(ue);setTimeout(function(){if(!de)pe=null},150)}function tt(e,t,n,r,l){if(Oe){var o=[];ce.iter(e.line,t.line+1,function(e){o.push(e.text)});Oe.addChange(e.line,n.length,o);while(Oe.done.length>i.undoDepth)Oe.done.shift()}lt(e,t,n,r,l)}function nt(e,t){var n=e.pop();if(n){var r=[],i=n.start+n.added;ce.iter(n.start,i,function(e){r.push(e.text)});t.push({start:n.start,added:n.old.length,old:r});var l=Ht({line:n.start+n.old.length-1,ch:_(r[r.length-1],n.old[n.old.length-1])});lt({line:n.start,ch:0},{line:i-1,ch:Be(i-1).text.length},n.old,l,l);ke=true}}function rt(){nt(Oe.done,Oe.undone)}function it(){nt(Oe.undone,Oe.done)}function lt(e,t,n,r,l){var o=false,a=He.length;if(!i.lineWrapping)ce.iter(e.line,t.line,function(e){if(e.text.length==a){o=true;return true}});if(e.line!=t.line||n.length>1)Le=true;var f=t.line-e.line,u=Be(e.line),s=Be(t.line);if(e.ch==0&&t.ch==0&&n[n.length-1]==""){var c=[],h=null;if(e.line){h=Be(e.line-1);h.fixMarkEnds(s)}else s.fixMarkStarts();for(var d=0,v=n.length-1;d<v;++d)c.push(p.inheritMarks(n[d],h));if(f)ce.remove(e.line,f,Ae);if(c.length)ce.insert(e.line,c)}else if(u==s){if(n.length==1)u.replace(e.ch,t.ch,n[0]);else{s=u.split(t.ch,n[n.length-1]);u.replace(e.ch,null,n[0]);u.fixMarkEnds(s);var c=[];for(var d=1,v=n.length-1;d<v;++d)c.push(p.inheritMarks(n[d],u));c.push(s);ce.insert(e.line+1,c)}}else if(n.length==1){u.replace(e.ch,null,n[0]);s.replace(null,t.ch,"");u.append(s);ce.remove(e.line+1,f,Ae)}else{var c=[];u.replace(e.ch,null,n[0]);s.replace(null,t.ch,n[n.length-1]);u.fixMarkEnds(s);for(var d=1,v=n.length-1;d<v;++d)c.push(p.inheritMarks(n[d],u));if(f>1)ce.remove(e.line+1,f-1,Ae);ce.insert(e.line+1,c)}if(i.lineWrapping){var m=U.clientWidth/xn()-3;ce.iter(e.line,e.line+n.length,function(e){if(e.hidden)return;var t=Math.ceil(e.text.length/m)||1;if(t!=e.height)Ve(e,t)})}else{ce.iter(e.line,d+n.length,function(e){var t=e.text;if(t.length>a){He=t;a=t.length;De=null;o=false}});if(o){a=0;He="";De=null;ce.iter(0,ce.size,function(e){var t=e.text;if(t.length>a){a=t.length;He=t}})}}var g=[],x=n.length-f-1;for(var d=0,y=he.length;d<y;++d){var k=he[d];if(k<e.line)g.push(k);else if(k>t.line)g.push(k+x)}var w=e.line+Math.min(n.length,500);zn(e.line,w);g.push(w);he=g;En(100);Ce.push({from:e.line,to:t.line+1,diff:x});var C={from:e,to:t,text:n};if(Me){for(var M=Me;M.next;M=M.next){}M.next=C}else Me=C;function b(e){return e<=Math.min(t.line,t.line+x)?e:e+x}Tt(r,l,b(ve.from.line),b(ve.to.line));Q.style.minHeight=ce.height*pn()+2*yn()+"px"}function ot(e,t,n){t=Ht(t);if(!n)n=t;else n=Ht(n);e=$(e);function r(r){if(F(r,t))return r;if(!F(n,r))return i;var l=r.line+e.length-(n.line-t.line)-1;var o=r.ch;if(r.line==n.line)o+=e[e.length-1].length-(n.ch-(n.line==t.line?t.ch:0));return{line:l,ch:o}}var i;ft(e,t,n,function(e){i=e;return{from:r(ve.from),to:r(ve.to)}});return i}function at(e,t){ft($(e),ve.from,ve.to,function(e){if(t=="end")return{from:e,to:e};else if(t=="start")return{from:ve.from,to:ve.from};else return{from:ve.from,to:e}})}function ft(e,t,n,r){var i=e.length==1?e[0].length+t.ch:e[e.length-1].length;var l=r({line:t.line+e.length-1,ch:i});tt(t,n,e,l.from,l.to)}function ut(e,t){var n=e.line,r=t.line;if(n==r)return Be(n).text.slice(e.ch,t.ch);var i=[Be(n).text.slice(e.ch)];ce.iter(n+1,r,function(e){i.push(e.text)});i.push(Be(r).text.slice(0,t.ch));return i.join("\n")}function st(){return ut(ve.from,ve.to)}var ct=false;function ht(){if(ct)return;ae.set(i.pollInterval,function(){Wn();pt();if(de)ht();Nn()})}function dt(){var e=false;ct=true;function t(){Wn();var n=pt();if(!n&&!e){e=true;ae.set(60,t)}else{ct=false;ht()}Nn()}ae.set(20,t)}var vt="";function pt(){if(Se||!de||Z(P))return false;var e=P.value;if(e==vt)return false;pe=null;var t=0,n=Math.min(vt.length,e.length);while(t<n&&vt[t]==e[t])++t;if(t<vt.length)ve.from={line:ve.from.line,ch:ve.from.ch-(vt.length-t)};else if(ye&&K(ve.from,ve.to))ve.to={line:ve.to.line,ch:Math.min(Be(ve.to.line).text.length,ve.to.ch+(e.length-t))};at(e.slice(t),"end");vt=e;return true}function mt(e){if(!K(ve.from,ve.to)){vt="";P.value=st();P.select()}else if(e)vt=P.value=""}function gt(){if(!i.readOnly)P.focus()}function xt(){if(!le.getBoundingClientRect)return;var e=le.getBoundingClientRect();if(I&&e.top==e.bottom)return;var t=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);if(e.top<0||e.bottom>t)le.scrollIntoView()}function yt(){var e=un(ve.inverted?ve.from:ve.to);var t=i.lineWrapping?Math.min(e.x,re.offsetWidth):e.x;return kt(t,e.y,t,e.yBot)}function kt(e,t,n,r){var l=kn(),o=yn(),a=pn();t+=o;r+=o;e+=l;n+=l;var f=U.clientHeight,u=U.scrollTop,s=false,c=true;if(t<u){U.scrollTop=Math.max(0,t-2*a);s=true}else if(r>u+f){U.scrollTop=r+a-f;s=true}var h=U.clientWidth,d=U.scrollLeft;var v=i.fixedGutter?te.clientWidth:0;if(e<d+v){if(e<50)e=0;U.scrollLeft=Math.max(0,e-10-v);s=true}else if(n>h+d-3){U.scrollLeft=n+10-h;s=true;if(n>Q.clientWidth)c=false}if(s&&i.onScroll)i.onScroll(Ue);return c}function wt(){var e=pn(),t=U.scrollTop-yn();var n=Math.max(0,Math.floor(t/e));var r=Math.ceil((t+U.clientHeight)/e);return{from:w(ce,n),to:w(ce,r)}}function Ct(e,t){if(!U.clientWidth){Te=Ee=ze=0;return}var n=wt();if(e!==true&&e.length==0&&n.from>=Te&&n.to<=Ee)return;var r=Math.max(n.from-100,0),l=Math.min(ce.size,n.to+100);if(Te<r&&r-Te<20)r=Te;if(Ee>l&&Ee-l<20)l=Math.min(ce.size,Ee);var o=e===true?[]:Mt([{from:Te,to:Ee,domStart:0}],e);var a=0;for(var f=0;f<o.length;++f){var u=o[f];if(u.from<r){u.domStart+=r-u.from;u.from=r}if(u.to>l)u.to=l;if(u.from>=u.to)o.splice(f--,1);else a+=u.to-u.from}if(a==l-r)return;o.sort(function(e,t){return e.domStart-t.domStart});var s=pn(),c=te.style.display;oe.style.display=te.style.display="none";bt(r,l,o);oe.style.display="";var h=r!=Te||l!=Ee||We!=U.clientHeight+s;if(h)We=U.clientHeight+s;Te=r;Ee=l;ze=C(ce,r);ee.style.top=ze*s+"px";Q.style.minHeight=ce.height*s+2*yn()+"px";if(oe.childNodes.length!=Ee-Te)throw new Error("BAD PATCH! "+JSON.stringify(o)+" size="+(Ee-Te)+" nodes="+oe.childNodes.length);if(i.lineWrapping){De=U.clientWidth;var d=oe.firstChild;ce.iter(Te,Ee,function(e){if(!e.hidden){var t=Math.round(d.offsetHeight/s)||1;if(e.height!=t){Ve(e,t);Le=true}}d=d.nextSibling})}else{if(De==null)De=ln(He);if(De>U.clientWidth){re.style.width=De+"px";Q.style.width="";Q.style.width=U.scrollWidth+"px"}else{re.style.width=Q.style.width=""}}te.style.display=c;if(h||Le)St();Lt();if(!t&&i.onUpdate)i.onUpdate(Ue);return true}function Mt(e,t){for(var n=0,r=t.length||0;n<r;++n){var i=t[n],l=[],o=i.diff||0;for(var a=0,f=e.length;a<f;++a){var u=e[a];if(i.to<=u.from&&i.diff)l.push({from:u.from+o,to:u.to+o,domStart:u.domStart});else if(i.to<=u.from||i.from>=u.to)l.push(u);else{if(i.from>u.from)l.push({from:u.from,to:i.from,domStart:u.domStart});if(i.to<u.to)l.push({from:i.to+o,to:u.to+o,domStart:u.domStart+(i.to-u.from)})}}e=l}return e}function bt(e,t,n){if(!n.length)oe.innerHTML="";else{function r(e){var t=e.nextSibling;e.parentNode.removeChild(e);return t}var i=0,l=oe.firstChild,o;for(var a=0;a<n.length;++a){var f=n[a];while(f.domStart>i){l=r(l);i++}for(var u=0,s=f.to-f.from;u<s;++u){l=l.nextSibling;i++}}while(l)l=r(l)}var c=n.shift(),l=oe.firstChild,u=e;var h=ve.from.line,d=ve.to.line,v=h<e&&d>=e;var p=b.createElement("div"),m;ce.iter(e,t,function(e){var t=null,r=null;if(v){t=0;if(d==u){v=false;r=ve.to.ch}}else if(h==u){if(d==u){t=ve.from.ch;r=ve.to.ch}else{v=true;t=ve.from.ch}}if(c&&c.to==u)c=n.shift();if(!c||c.from>u){if(e.hidden)p.innerHTML="<pre></pre>";else p.innerHTML=e.getHTML(t,r,true,Ie);oe.insertBefore(p.firstChild,l)}else{l=l.nextSibling}++u})}function St(){if(!i.gutter&&!i.lineNumbers)return;var e=ee.offsetHeight,t=U.clientHeight;te.style.height=(e-t<2?t:e)+"px";var n=[],r=Te;ce.iter(Te,Math.max(Ee,Te+1),function(e){if(e.hidden){n.push("<pre></pre>")}else{var t=e.gutterMarker;var l=i.lineNumbers?r+i.firstLineNumber:null;if(t&&t.text)l=t.text.replace("%N%",l!=null?l:"");else if(l==null)l=" ";n.push(t&&t.style?'<pre class="'+t.style+'">':"<pre>",l);for(var o=1;o<e.height;++o)n.push("<br/>&#160;");n.push("</pre>")}++r});te.style.display="none";ne.innerHTML=n.join("");var l=String(ce.size).length,o=ne.firstChild,a=V(o),f="";while(a.length+f.length<l)f+=" ";if(f)o.insertBefore(b.createTextNode(f),o.firstChild);te.style.display="";re.style.marginLeft=te.offsetWidth+"px";Le=false}function Lt(){var e=ve.inverted?ve.from:ve.to,t=pn();var n=un(e,true);var r=B(A),l=B(oe);R.style.top=n.y+l.top-r.top+"px";R.style.left=n.x+l.left-r.left+"px";if(K(ve.from,ve.to)){le.style.top=n.y+"px";le.style.left=(i.lineWrapping?Math.min(n.x,re.offsetWidth):n.x)+"px";le.style.display=""}else le.style.display="none"}function At(e){if(e)pe=pe||(ve.inverted?ve.to:ve.from);else pe=null}function zt(e,t){var n=pe&&Ht(pe);if(n){if(F(n,e))e=n;else if(F(t,n))t=n}Tt(e,t);we=true}function Tt(e,t,n,r){Rt=null;if(n==null){n=ve.from.line;r=ve.to.line}if(K(ve.from,e)&&K(ve.to,t))return;if(F(t,e)){var i=t;t=e;e=i}if(e.line!=n)e=Et(e,n,ve.from.ch);if(t.line!=r)t=Et(t,r,ve.to.ch);if(K(e,t))ve.inverted=false;else if(K(e,ve.to))ve.inverted=false;else if(K(t,ve.from))ve.inverted=true;if(K(e,t)){if(!K(ve.from,ve.to))Ce.push({from:n,to:r+1})}else if(K(ve.from,ve.to)){Ce.push({from:e.line,to:t.line+1})}else{if(!K(e,ve.from)){if(e.line<n)Ce.push({from:e.line,to:Math.min(t.line,n)+1});else Ce.push({from:n,to:Math.min(r,e.line)+1})}if(!K(t,ve.to)){if(t.line<r)Ce.push({from:Math.max(n,e.line),to:r+1});else Ce.push({from:Math.max(e.line,r),to:t.line+1})}}ve.from=e;ve.to=t;be=true}function Et(e,t,n){function r(t){var r=e.line+t,i=t==1?ce.size:-1;while(r!=i){var l=Be(r);if(!l.hidden){var o=e.ch;if(o>n||o>l.text.length)o=l.text.length;return{line:r,ch:o}}r+=t}}var i=Be(e.line);if(!i.hidden)return e;if(e.line>=t)return r(1)||r(-1);else return r(-1)||r(1)}function Wt(e,t,n){var r=Ht({line:e,ch:t||0});(n?zt:Tt)(r,r)}function Nt(e){return Math.max(0,Math.min(e,ce.size-1))}function Ht(e){if(e.line<0)return{line:0,ch:0};if(e.line>=ce.size)return{line:ce.size-1,ch:Be(ce.size-1).text.length};var t=e.ch,n=Be(e.line).text.length;if(t==null||t>n)return{line:e.line,ch:n};else if(t<0)return{line:e.line,ch:0};else return e}function Dt(e,t){var n=ve.inverted?ve.from:ve.to,r=n.line,i=n.ch;var l=Be(r);function o(){for(var t=r+e,n=e<0?-1:ce.size;t!=n;t+=e){var i=Be(t);if(!i.hidden){r=t;l=i;return true}}}function a(t){if(i==(e<0?0:l.text.length)){if(!t&&o())i=e<0?l.text.length:0;else return false}else i+=e;return true}if(t=="char")a();else if(t=="column")a(true);else if(t=="word"){var f=false;for(;;){if(e<0)if(!a())break;if(X(l.text.charAt(i)))f=true;else if(f){if(e<0){e=1;a()}break}if(e>0)if(!a())break}}return{line:r,ch:i}}function It(e,t){var n=e<0?ve.from:ve.to;if(pe||K(ve.from,ve.to))n=Dt(e,t);Wt(n.line,n.ch,true)}function Ot(e,t){if(!K(ve.from,ve.to))ot("",ve.from,ve.to);else if(e<0)ot("",Dt(e,t),ve.to);else ot("",ve.from,Dt(e,t));we=true}var Rt=null;function Pt(e,t){var n=0,r=un(ve.inverted?ve.from:ve.to,true);if(Rt!=null)r.x=Rt;if(t=="page")n=U.clientHeight;else if(t=="line")n=pn();var i=sn(r.x,r.y+n*e+2);Wt(i.line,i.ch,true);Rt=r.x}function Ut(e){var t=Be(e.line).text;var n=e.ch,r=e.ch;while(n>0&&X(t.charAt(n-1)))--n;while(r<t.length&&X(t.charAt(r)))++r;zt({line:e.line,ch:n},{line:e.line,ch:r})}function Bt(e){zt({line:e,ch:0},{line:e,ch:Be(e).text.length})}function Vt(e){if(K(ve.from,ve.to))return Kt(ve.from.line,e);var t=ve.to.line-(ve.to.ch?0:1);for(var n=ve.from.line;n<=t;++n)Kt(n,e)}function Kt(e,t){if(!t)t="add";if(t=="smart"){if(!se.indent)t="prev";else var n=An(e)}var r=Be(e),l=r.indentation(i.tabSize),o=r.text.match(/^\s*/)[0],a;if(t=="prev"){if(e)a=Be(e-1).indentation(i.tabSize);else a=0}else if(t=="smart")a=se.indent(n,r.text.slice(o.length),r.text);else if(t=="add")a=l+i.indentUnit;else if(t=="subtract")a=l-i.indentUnit;a=Math.max(0,a);var f=a-l;if(!f){if(ve.from.line!=e&&ve.to.line!=e)return;var u=o}else{var u="",s=0;if(i.indentWithTabs)for(var c=Math.floor(a/i.tabSize);c;--c){s+=i.tabSize;u+="\t"}while(s<a){++s;u+=" "}}ot(u,{line:e,ch:0},{line:e,ch:o.length})}function Ft(){se=e.getMode(i,i.mode);ce.iter(0,ce.size,function(e){e.stateAfter=null});he=[0];En()}function jt(){var e=i.gutter||i.lineNumbers;te.style.display=e?"":"none";if(e)Le=true;else oe.parentNode.style.marginLeft=0}function Gt(e,t){if(i.lineWrapping){A.className+=" CodeMirror-wrap";var n=U.clientWidth/xn()-3;ce.iter(0,ce.size,function(e){if(e.hidden)return;var t=Math.ceil(e.text.length/n)||1;if(t!=1)Ve(e,t)});re.style.width=Q.style.width=""}else{A.className=A.className.replace(" CodeMirror-wrap","");De=null;He="";ce.iter(0,ce.size,function(e){if(e.height!=1&&!e.hidden)Ve(e,1);if(e.text.length>He.length)He=e.text})}Ce.push({from:0,to:ce.size})}function Yt(){for(var e='<span class="cm-tab">',t=0;t<i.tabSize;++t)e+=" ";return e+"</span>"}function _t(){Ie=Yt();Ct(true)}function qt(){U.className=U.className.replace(/\s*cm-s-\w+/g,"")+i.theme.replace(/(^|\s)\s*/g," cm-s-")}function Xt(){this.set=[]}Xt.prototype.clear=Dn(function(){var e=Infinity,t=-Infinity;for(var n=0,r=this.set.length;n<r;++n){var i=this.set[n],l=i.marked;if(!l||!i.parent)continue;var o=k(i);e=Math.min(e,o);t=Math.max(t,o);for(var a=0;a<l.length;++a)if(l[a].set==this.set)l.splice(a--,1)}if(e!=Infinity)Ce.push({from:e,to:t+1})});Xt.prototype.find=function(){var e,t;for(var n=0,r=this.set.length;n<r;++n){var i=this.set[n],l=i.marked;for(var o=0;o<l.length;++o){var a=l[o];if(a.set==this.set){if(a.from!=null||a.to!=null){var f=k(i);if(f!=null){if(a.from!=null)e={line:f,ch:a.from};if(a.to!=null)t={line:f,ch:a.to}}}}}}return{from:e,to:t}};function $t(e,t,n){e=Ht(e);t=Ht(t);var r=new Xt;function i(e,t,n,i){Be(e).addMark(new d(t,n,i,r.set))}if(e.line==t.line)i(e.line,e.ch,t.ch,n);else{i(e.line,e.ch,null,n);for(var l=e.line+1,o=t.line;l<o;++l)i(l,null,null,n);i(t.line,null,t.ch,n)}Ce.push({from:e.line,to:t.line+1});return r}function Zt(e){e=Ht(e);var t=new v(e.ch);Be(e.line).addMark(t);return t}function Jt(e,t,n){if(typeof e=="number")e=Be(Nt(e));e.gutterMarker={text:t,style:n};Le=true;return e}function Qt(e){if(typeof e=="number")e=Be(Nt(e));e.gutterMarker=null;Le=true}function en(e,t){var n=e,r=e;if(typeof e=="number")r=Be(Nt(e));else n=k(e);if(n==null)return null;if(t(r,n))Ce.push({from:n,to:n+1});else return null;return r}function tn(e,t){return en(e,function(e){if(e.className!=t){e.className=t;return true}})}function nn(e,t){return en(e,function(e,n){if(e.hidden!=t){e.hidden=t;Ve(e,t?0:1);if(t&&(ve.from.line==n||ve.to.line==n))Tt(Et(ve.from,ve.from.line,ve.from.ch),Et(ve.to,ve.to.line,ve.to.ch));return Le=true}})}function rn(e){if(typeof e=="number"){if(!Pe(e))return null;var t=e;e=Be(e);if(!e)return null}else{var t=k(e);if(t==null)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className}}function ln(e){ie.innerHTML="<pre><span>x</span></pre>";ie.firstChild.firstChild.firstChild.nodeValue=e;return ie.firstChild.firstChild.offsetWidth||10}function on(e,t){if(t<=0)return 0;var n=Be(e),r=n.text;function i(e){ie.innerHTML="<pre><span>"+n.getHTML(null,null,false,Ie,e)+"</span></pre>";return ie.firstChild.firstChild.offsetWidth}var l=0,o=0,a=r.length,f;var u=Math.min(a,Math.ceil(t/xn()));for(;;){var s=i(u);if(s<=t&&u<a)u=Math.min(a,Math.ceil(u*1.2));else{f=s;a=u;break}}if(t>f)return a;u=Math.floor(a*.8);s=i(u);if(s<t){l=u;o=s}for(;;){if(a-l<=1)return f-t>t-o?l:a;var c=Math.ceil((l+a)/2),h=i(c);if(h>t){a=c;f=h}else{l=c;o=h}}}var an=Math.floor(Math.random()*16777215).toString(16);function fn(e,t){var n="";if(i.lineWrapping){var r=e.text.indexOf(" ",t+2);n=Y(e.text.slice(t+1,r<0?e.text.length:r+(I?5:0)))}ie.innerHTML="<pre>"+e.getHTML(null,null,false,Ie,t)+'<span id="CodeMirror-temp-'+an+'">'+Y(e.text.charAt(t)||" ")+"</span>"+n+"</pre>";var l=document.getElementById("CodeMirror-temp-"+an);var o=l.offsetTop,a=l.offsetLeft;if(I&&t&&o==0&&a==0){var f=document.createElement("span");f.innerHTML="x";l.parentNode.insertBefore(f,l.nextSibling);o=f.offsetTop}return{top:o,left:a}}function un(e,t){var n,r=pn(),l=r*(C(ce,e.line)-(t?ze:0));if(e.ch==0)n=0;else{var o=fn(Be(e.line),e.ch);n=o.left;if(i.lineWrapping)l+=Math.max(0,o.top)}return{x:n,y:l,yBot:l+r}}function sn(e,t){if(t<0)t=0;var n=pn(),r=xn(),l=ze+Math.floor(t/n);var o=w(ce,l);if(o>=ce.size)return{line:ce.size-1,ch:Be(ce.size-1).text.length};var a=Be(o),f=a.text;var u=i.lineWrapping,s=u?l-C(ce,o):0;if(e<=0&&s==0)return{line:o,ch:0};function c(e){var t=fn(a,e);if(u){var r=Math.round(t.top/n);return Math.max(0,t.left+(r-s)*U.clientWidth)}return t.left}var h=0,d=0,v=f.length,p;var m=Math.min(v,Math.ceil((e+s*U.clientWidth*.9)/r));for(;;){var g=c(m);if(g<=e&&m<v)m=Math.min(v,Math.ceil(m*1.2));else{p=g;v=m;break}}if(e>p)return{line:o,ch:v};m=Math.floor(v*.8);g=c(m);if(g<e){h=m;d=g}for(;;){if(v-h<=1)return{line:o,ch:p-e>e-d?h:v};var x=Math.ceil((h+v)/2),y=c(x);if(y>e){v=x;p=y}else{h=x;d=y}}}function cn(e){var t=un(e,true),n=B(re);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}var hn,dn,vn;function pn(){if(vn==null){vn="<pre>";for(var e=0;e<49;++e)vn+="x<br/>";vn+="x</pre>"}var t=oe.clientHeight;if(t==dn)return hn;dn=t;ie.innerHTML=vn;hn=ie.firstChild.offsetHeight/50||1;ie.innerHTML="";return hn}var mn,gn=0;function xn(){if(U.clientWidth==gn)return mn;gn=U.clientWidth;return mn=ln("x")}function yn(){return re.offsetTop}function kn(){return re.offsetLeft}function wn(e,t){var n=B(U,true),r,i;try{r=e.clientX;i=e.clientY}catch(e){return null}if(!t&&(r-n.left>U.clientWidth||i-n.top>U.clientHeight))return null;var l=B(re,true);return sn(r-l.left,i-l.top)}function Cn(e){var t=wn(e);if(!t||window.opera)return;if(K(ve.from,ve.to)||F(t,ve.from)||!F(t,ve.to))Dn(Wt)(t.line,t.ch);var n=P.style.cssText;R.style.position="absolute";P.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";Se=true;var r=P.value=st();gt();P.select();function i(){var e=$(P.value).join("\n");if(e!=r)Dn(at)(e,"end");R.style.position="relative";P.style.cssText=n;Se=false;mt(true);ht()}if(D){z(e);var l=W(window,"mouseup",function(){l();setTimeout(i,20)},true)}else{setTimeout(i,50)}}function Mn(){clearInterval(ue);var e=true;le.style.visibility="";ue=setInterval(function(){le.style.visibility=(e=!e)?"":"hidden"},650)}var bn={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function Sn(e){var t=ve.inverted?ve.from:ve.to,n=Be(t.line),r=t.ch-1;var i=r>=0&&bn[n.text.charAt(r)]||bn[n.text.charAt(++r)];if(!i)return;var l=i.charAt(0),o=i.charAt(1)==">",a=o?1:-1,f=n.styles;for(var u=r+1,s=0,c=f.length;s<c;s+=2)if((u-=f[s].length)<=0){var h=f[s+1];break}var d=[n.text.charAt(r)],v=/[(){}[\]]/;function p(e,t,n){if(!e.text)return;var r=e.styles,i=o?0:e.text.length-1,l;for(var f=o?0:r.length-2,u=o?r.length:-2;f!=u;f+=2*a){var s=r[f];if(r[f+1]!=null&&r[f+1]!=h){i+=a*s.length;continue}for(var c=o?0:s.length-1,p=o?s.length:-1;c!=p;c+=a,i+=a){if(i>=t&&i<n&&v.test(l=s.charAt(c))){var m=bn[l];if(m.charAt(1)==">"==o)d.push(l);else if(d.pop()!=m.charAt(0))return{pos:i,match:false};else if(!d.length)return{pos:i,match:true}}}}}for(var s=t.line,c=o?Math.min(s+100,ce.size):Math.max(-1,s-100);s!=c;s+=a){var n=Be(s),m=s==t.line;var g=p(n,m&&o?r+1:0,m&&!o?r:n.text.length);if(g)break}if(!g)g={pos:null,match:false};var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var x=$t({line:t.line,ch:r},{line:t.line,ch:r+1},h),y=g.pos!=null&&$t({line:s,ch:g.pos},{line:s,ch:g.pos+1},h);var k=Dn(function(){x.clear();y&&y.clear()});if(e)setTimeout(k,800);else Ne=k}function Ln(e){var t,n;for(var r=e,l=e-40;r>l;--r){if(r==0)return 0;var o=Be(r-1);if(o.stateAfter)return r;var a=o.indentation(i.tabSize);if(n==null||t>a){n=r-1;t=a}}return n}function An(e){var t=Ln(e),n=t&&Be(t-1).stateAfter;if(!n)n=c(se);else n=s(se,n);ce.iter(t,e,function(e){e.highlight(se,n,i.tabSize);e.stateAfter=s(se,n)});if(t<e)Ce.push({from:t,to:e});if(e<ce.size&&!Be(e).stateAfter)he.push(e);return n}function zn(e,t){var n=An(e);ce.iter(e,t,function(e){e.highlight(se,n,i.tabSize);e.stateAfter=s(se,n)})}function Tn(){var e=+new Date+i.workTime;var t=he.length;while(he.length){if(!Be(Te).stateAfter)var n=Te;else var n=he.pop();if(n>=ce.size)continue;var r=Ln(n),l=r&&Be(r-1).stateAfter;if(l)l=s(se,l);else l=c(se);var o=0,a=se.compareStates,f=false,u=r,h=false;ce.iter(u,ce.size,function(t){var r=t.stateAfter;if(+new Date>e){he.push(u);En(i.workDelay);if(f)Ce.push({from:n,to:u+1});return h=true}var c=t.highlight(se,l,i.tabSize);if(c)f=true;t.stateAfter=s(se,l);if(a){if(r&&a(r,l))return true}else{if(c!==false||!r)o=0;else if(++o>3&&(!se.indent||se.indent(r,"")==se.indent(l,"")))return true}++u});if(h)return;if(f)Ce.push({from:n,to:u+1})}if(t&&i.onHighlightComplete)i.onHighlightComplete(Ue)}function En(e){if(!he.length)return;fe.set(e,Dn(Tn))}function Wn(){ke=we=Me=null;Ce=[];be=false;Ae=[]}function Nn(){var e=false,t;if(be)e=!yt();if(Ce.length)t=Ct(Ce,true);else{if(be)Lt();if(Le)St()}if(e)yt();if(be){xt();Mn()}if(de&&!Se&&(ke===true||ke!==false&&be))mt(we);if(be&&i.matchBrackets)setTimeout(Dn(function(){if(Ne){Ne();Ne=null}if(K(ve.from,ve.to))Sn(false)}),20);var n=Me,r=Ae;if(be&&i.onCursorActivity)i.onCursorActivity(Ue);if(n&&i.onChange&&Ue)i.onChange(Ue,n);for(var l=0;l<r.length;++l)r[l](Ue);if(t&&i.onUpdate)i.onUpdate(Ue)}var Hn=0;function Dn(e){return function(){if(!Hn++)Wn();try{var t=e.apply(this,arguments)}finally{if(!--Hn)Nn()}return t}}for(var In in l)if(l.propertyIsEnumerable(In)&&!Ue.propertyIsEnumerable(In))Ue[In]=l[In];return Ue}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:false,tabSize:4,keyMap:"default",extraKeys:null,electricChars:true,onKeyEvent:null,lineWrapping:false,lineNumbers:false,gutter:false,fixedGutter:false,firstLineNumber:1,readOnly:false,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var t=/Mac/.test(navigator.platform);var n=/Win/.test(navigator.platform);var r={},i={};e.defineMode=function(t,n){if(!e.defaults.mode&&t!="null")e.defaults.mode=t;r[t]=n};e.defineMIME=function(e,t){i[e]=t};e.getMode=function(t,n){if(typeof n=="string"&&i.hasOwnProperty(n))n=i[n];if(typeof n=="string")var l=n,o={};else if(n!=null)var l=n.name,o=n;var a=r[l];if(!a){if(window.console)console.warn("No mode "+l+" found, falling back to plain text.");
return e.getMode(t,"text/plain")}return a(t,o||{})};e.listModes=function(){var e=[];for(var t in r)if(r.propertyIsEnumerable(t))e.push(t);return e};e.listMIMEs=function(){var e=[];for(var t in i)if(i.propertyIsEnumerable(t))e.push({mime:t,mode:i[t]});return e};var l=e.extensions={};e.defineExtension=function(e,t){l[e]=t};var o=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(true),n=e.getCursor(false),r=!K(t,n);if(!r&&e.getLine(t.line).length==t.ch)e.replaceRange("",t,{line:t.line+1,ch:0});else e.replaceRange("",t,r?n:{line:t.line})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,true)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,true)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,true)},goLineStartSmart:function(e){var t=e.getCursor();var n=e.getLine(t.line),r=Math.max(0,n.search(/\S/));e.setCursor(t.line,t.ch<=r&&t.ch?0:r,true)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,true)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);if(t.ch>0&&t.ch<n.length-1)e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end");e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}};var a=e.keyMap={};a.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};a.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"};a.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]};a["default"]=t?a.macDefault:a.pcDefault;a.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};function f(e,t,n){function r(e,t,n){var i=t[e];if(i!=null)return i;if(n==null)n=t.fallthrough;if(n==null)return t.catchall;if(typeof n=="string")return r(e,a[n]);for(var l=0,o=n.length;l<o;++l){i=r(e,a[n[l]]);if(i!=null)return i}return null}return t?r(e,t,n):r(e,a[n])}function u(e){var t=J[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}e.fromTextArea=function(t,n){if(!n)n={};n.value=t.value;if(!n.tabindex&&t.tabindex)n.tabindex=t.tabindex;function r(){t.value=a.getValue()}if(t.form){var i=W(t.form,"submit",r,true);if(typeof t.form.submit=="function"){var l=t.form.submit;function o(){r();t.form.submit=l;t.form.submit();t.form.submit=o}t.form.submit=o}}t.style.display="none";var a=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);a.save=r;a.getTextArea=function(){return t};a.toTextArea=function(){r();t.parentNode.removeChild(a.getWrapperElement());t.style.display="";if(t.form){i();if(typeof t.form.submit=="function")t.form.submit=l}};return a};function s(e,t){if(t===true)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];if(i instanceof Array)i=i.concat([]);n[r]=i}return n}e.copyState=s;function c(e,t,n){return e.startState?e.startState(t,n):true}e.startState=c;function h(e,t){this.pos=this.start=0;this.string=e;this.tabSize=t||8}h.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n){++this.pos;return t}},eatWhile:function(e){var t=this.pos;while(this.eat(e)){}return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1){this.pos=t;return true}},backUp:function(e){this.pos-=e},column:function(){return P(this.string,this.start,this.tabSize)},indentation:function(){return P(this.string,null,this.tabSize)},match:function(e,t,n){if(typeof e=="string"){function r(e){return n?e.toLowerCase():e}if(r(this.string).indexOf(r(e),this.pos)==this.pos){if(t!==false)this.pos+=e.length;return true}}else{var i=this.string.slice(this.pos).match(e);if(i&&t!==false)this.pos+=i[0].length;return i}},current:function(){return this.string.slice(this.start,this.pos)}};e.StringStream=h;function d(e,t,n,r){this.from=e;this.to=t;this.style=n;this.set=r}d.prototype={attach:function(e){this.set.push(e)},detach:function(e){var t=q(this.set,e);if(t>-1)this.set.splice(t,1)},split:function(e,t){if(this.to<=e&&this.to!=null)return null;var n=this.from<e||this.from==null?null:this.from-e+t;var r=this.to==null?null:this.to-e+t;return new d(n,r,this.style,this.set)},dup:function(){return new d(null,null,this.style,this.set)},clipTo:function(e,t,n,r,i){if(this.from!=null&&this.from>=t)this.from=Math.max(r,this.from)+i;if(this.to!=null&&this.to>t)this.to=r<this.to?this.to+i:t;if(e&&r>this.from&&(r<this.to||this.to==null))this.from=null;if(n&&(t<this.to||this.to==null)&&(t>this.from||this.from==null))this.to=null},isDead:function(){return this.from!=null&&this.to!=null&&this.from>=this.to},sameSet:function(e){return this.set==e.set}};function v(e){this.from=e;this.to=e;this.line=null}v.prototype={attach:function(e){this.line=e},detach:function(e){if(this.line==e)this.line=null},split:function(e,t){if(e<this.from){this.from=this.to=this.from-e+t;return this}},isDead:function(){return this.from>this.to},clipTo:function(e,t,n,r,i){if((e||t<this.from)&&(n||r>this.to)){this.from=0;this.to=-1}else if(this.from>t){this.from=this.to=Math.max(r,this.from)+i}},sameSet:function(e){return false},find:function(){if(!this.line||!this.line.parent)return null;return{line:k(this.line),ch:this.from}},clear:function(){if(this.line){var e=q(this.line.marked,this);if(e!=-1)this.line.marked.splice(e,1);this.line=null}}};function p(e,t){this.styles=t||[e,null];this.text=e;this.height=1;this.marked=this.gutterMarker=this.className=this.handlers=null;this.stateAfter=this.parent=this.hidden=null}p.inheritMarks=function(e,t){var n=new p(e),r=t&&t.marked;if(r){for(var i=0;i<r.length;++i){if(r[i].to==null&&r[i].style){var l=n.marked||(n.marked=[]),o=r[i];var a=o.dup();l.push(a);a.attach(n)}}}return n};p.prototype={replace:function(e,t,n){var r=[],i=this.marked,l=t==null?this.text.length:t;m(0,e,this.styles,r);if(n)r.push(n,null);m(l,this.text.length,this.styles,r);this.styles=r;this.text=this.text.slice(0,e)+n+this.text.slice(l);this.stateAfter=null;if(i){var o=n.length-(l-e);for(var a=0,f=i[a];a<i.length;++a){f.clipTo(e==null,e||0,t==null,l,o);if(f.isDead()){f.detach(this);i.splice(a--,1)}}}},split:function(e,t){var n=[t,null],r=this.marked;m(e,this.text.length,this.styles,n);var i=new p(t+this.text.slice(e),n);if(r){for(var l=0;l<r.length;++l){var o=r[l];var a=o.split(e,t.length);if(a){if(!i.marked)i.marked=[];i.marked.push(a);a.attach(i)}}}return i},append:function(e){var t=this.text.length,n=e.marked,r=this.marked;this.text+=e.text;m(0,e.text.length,e.styles,this.styles);if(r){for(var i=0;i<r.length;++i)if(r[i].to==null)r[i].to=t}if(n&&n.length){if(!r)this.marked=r=[];e:for(var i=0;i<n.length;++i){var l=n[i];if(!l.from){for(var o=0;o<r.length;++o){var a=r[o];if(a.to==t&&a.sameSet(l)){a.to=l.to==null?null:l.to+t;if(a.isDead()){a.detach(this);n.splice(i--,1)}continue e}}}r.push(l);l.attach(this);l.from+=t;if(l.to!=null)l.to+=t}}},fixMarkEnds:function(e){var t=this.marked,n=e.marked;if(!t)return;for(var r=0;r<t.length;++r){var i=t[r],l=i.to==null;if(l&&n){for(var o=0;o<n.length;++o)if(n[o].sameSet(i)){l=false;break}}if(l)i.to=this.text.length}},fixMarkStarts:function(){var e=this.marked;if(!e)return;for(var t=0;t<e.length;++t)if(e[t].from==null)e[t].from=0},addMark:function(e){e.attach(this);if(this.marked==null)this.marked=[];this.marked.push(e);this.marked.sort(function(e,t){return(e.from||0)-(t.from||0)})},highlight:function(e,t,n){var r=new h(this.text,n),i=this.styles,l=0;var o=false,a=i[0],f;if(this.text==""&&e.blankLine)e.blankLine(t);while(!r.eol()){var u=e.token(r,t);var s=this.text.slice(r.start,r.pos);r.start=r.pos;if(l&&i[l-1]==u)i[l-2]+=s;else if(s){if(!o&&(i[l+1]!=u||l&&i[l-2]!=f))o=true;i[l++]=s;i[l++]=u;f=a;a=i[l]}if(r.pos>5e3){i[l++]=this.text.slice(r.pos);i[l++]=null;break}}if(i.length!=l){i.length=l;o=true}if(l&&i[l-2]!=f)o=true;return o||(i.length<5&&this.text.length<10?null:false)},getTokenAt:function(e,t,n){var r=this.text,i=new h(r);while(i.pos<n&&!i.eol()){i.start=i.pos;var l=e.token(i,t)}return{start:i.start,end:i.pos,string:i.current(),className:l||null,state:t}},indentation:function(e){return P(this.text,null,e)},getHTML:function(e,t,n,r,i){var l=[],o=true;if(n)l.push(this.className?'<pre class="'+this.className+'">':"<pre>");function a(e,t){if(!e)return;if(o&&I&&e.charAt(0)==" ")e=" "+e.slice(1);o=false;if(t)l.push('<span class="',t,'">',Y(e).replace(/\t/g,r),"</span>");else l.push(Y(e).replace(/\t/g,r))}var f=this.styles,u=this.text,s=this.marked;if(e==t)e=null;var c=u.length;if(i!=null)c=Math.min(i,c);if(!u&&i==null)a(" ",e!=null&&t==null?"CodeMirror-selected":null);else if(!s&&e==null)for(var h=0,d=0;d<c;h+=2){var v=f[h],p=f[h+1],m=v.length;if(d+m>c)v=v.slice(0,c-d);d+=m;a(v,p&&"cm-"+p)}else{var g=0,h=0,x="",p,y=0;var k=-1,w=null;function C(){if(s){k+=1;w=k<s.length?s[k]:null}}C();while(g<c){var M=c;var b="";if(e!=null){if(e>g)M=e;else if(t==null||t>g){b=" CodeMirror-selected";if(t!=null)M=Math.min(M,t)}}while(w&&w.to!=null&&w.to<=g)C();if(w){if(w.from>g)M=Math.min(M,w.from);else{b+=" "+w.style;if(w.to!=null)M=Math.min(M,w.to)}}for(;;){var S=g+x.length;var L=p;if(b)L=p?p+b:b;a(S>M?x.slice(0,M-g):x,L);if(S>=M){x=x.slice(M-g);g=M;break}g=S;x=f[h++];p="cm-"+f[h++]}}if(e!=null&&t==null)a(" ","CodeMirror-selected")}if(n)l.push("</pre>");return l.join("")},cleanUp:function(){this.parent=null;if(this.marked)for(var e=0,t=this.marked.length;e<t;++e)this.marked[e].detach(this)}};function m(e,t,n,r){for(var i=0,l=0,o=0;l<t;i+=2){var a=n[i],f=l+a.length;if(o==0){if(f>e)r.push(a.slice(e-l,Math.min(a.length,t-l)),n[i+1]);if(f>=e)o=1}else if(o==1){if(f>t)r.push(a.slice(0,t-l),n[i+1]);else r.push(a,n[i+1])}l=f}}function g(e){this.lines=e;this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t){e[t].parent=this;r+=e[t].height}this.height=r}g.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var r=e,i=e+t;r<i;++r){var l=this.lines[r];this.height-=l.height;l.cleanUp();if(l.handlers)for(var o=0;o<l.handlers.length;++o)n.push(l.handlers[o])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n;this.lines.splice.apply(this.lines,[e,0].concat(t));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return true}};function x(e){this.children=e;var t=0,n=0;for(var r=0,i=e.length;r<i;++r){var l=e[r];t+=l.chunkSize();n+=l.height;l.parent=this}this.size=t;this.height=n;this.parent=null}x.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],l=i.chunkSize();if(e<l){var o=Math.min(t,l-e),a=i.height;i.remove(e,o,n);this.height-=a-i.height;if(l==o){this.children.splice(r--,1);i.parent=null}if((t-=o)==0)break;e=0}else e-=l}if(this.size-t<25){var f=[];this.collapse(f);this.children=[new g(f)]}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insert:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length;this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var l=this.children[r],o=l.chunkSize();if(e<=o){l.insertHeight(e,t,n);if(l.lines&&l.lines.length>50){while(l.lines.length>50){var a=l.lines.splice(l.lines.length-25,25);var f=new g(a);l.height-=f.height;this.children.splice(r+1,0,f);f.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5);var n=new x(t);if(!e.parent){var r=new x(e.children);r.parent=e;e.children=[r,n];e=r}else{e.size-=n.size;e.height-=n.height;var i=q(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var l=this.children[r],o=l.chunkSize();if(e<o){var a=Math.min(t,o-e);if(l.iterN(e,a,n))return true;if((t-=a)==0)break;e=0}else e-=o}}};function y(e,t){while(!e.lines){for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}}return e.lines[t]}function k(e){if(e.parent==null)return null;var t=e.parent,n=q(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent){for(var i=0,l=r.children.length;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}}return n}function w(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var l=e.children[r],o=l.height;if(t<o){e=l;continue e}t-=o;n+=l.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var a=e.lines[r],f=a.height;if(t<f)break;t-=f}return n+r}function C(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var l=e.children[r],o=l.chunkSize();if(t<o){e=l;continue e}t-=o;n+=l.height}return n}while(!e.lines);for(var r=0;r<t;++r)n+=e.lines[r].height;return n}function M(){this.time=0;this.done=[];this.undone=[]}M.prototype={addChange:function(e,t,n){this.undone.length=0;var r=+new Date,i=this.done[this.done.length-1];if(r-this.time>400||!i||i.start>e+t||i.start+i.added<e-i.added+i.old.length)this.done.push({start:e,added:t,old:n});else{var l=0;if(e<i.start){for(var o=i.start-e-1;o>=0;--o)i.old.unshift(n[o]);i.added+=i.start-e;i.start=e}else if(i.start<e){l=e-i.start;t+=l}for(var o=i.added-l,a=n.length;o<a;++o)i.old.push(n[o]);if(i.added<t)i.added=t}this.time=r}};function b(){z(this)}function S(e){if(!e.stop)e.stop=b;return e}function L(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false}function A(e){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true}function z(e){L(e);A(e)}e.e_stop=z;e.e_preventDefault=L;e.e_stopPropagation=A;function T(e){return e.target||e.srcElement}function E(e){if(e.which)return e.which;else if(e.button&1)return 1;else if(e.button&2)return 3;else if(e.button&4)return 2}function W(e,t,n,r){if(typeof e.addEventListener=="function"){e.addEventListener(t,n,false);if(r)return function(){e.removeEventListener(t,n,false)}}else{var i=function(e){n(e||window.event)};e.attachEvent("on"+t,i);if(r)return function(){e.detachEvent("on"+t,i)}}}e.connect=W;function N(){this.id=null}N.prototype={set:function(e,t){clearTimeout(this.id);this.id=setTimeout(t,e)}};var H=function(){if(/MSIE [1-8]\b/.test(navigator.userAgent))return false;var e=document.createElement("div");return"draggable"in e}();var D=/gecko\/\d{7}/i.test(navigator.userAgent);var I=/MSIE \d/.test(navigator.userAgent);var O=/WebKit\//.test(navigator.userAgent);var R="\n";(function(){var e=document.createElement("textarea");e.value="foo\nbar";if(e.value.indexOf("\r")>-1)R="\r\n"})();function P(e,t,n){if(t==null){t=e.search(/[^\s\u00a0]/);if(t==-1)t=e.length}for(var r=0,i=0;r<t;++r){if(e.charAt(r)=="\t")i+=n-i%n;else++i}return i}function U(e){if(e.currentStyle)return e.currentStyle;return window.getComputedStyle(e,null)}function B(e,t){var n=e.ownerDocument.body;var r=0,i=0,l=false;for(var o=e;o;o=o.offsetParent){var a=o.offsetLeft,f=o.offsetTop;if(o==n){r+=Math.abs(a);i+=Math.abs(f)}else{r+=a,i+=f}if(t&&U(o).position=="fixed")l=true}var u=t&&!l?null:n;for(var o=e.parentNode;o!=u;o=o.parentNode)if(o.scrollLeft!=null){r-=o.scrollLeft;i-=o.scrollTop}return{left:r,top:i}}if(document.documentElement.getBoundingClientRect!=null)B=function(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(e){n={top:0,left:0}}if(!t){if(window.pageYOffset==null){var r=document.documentElement||document.body.parentNode;if(r.scrollTop==null)r=document.body;n.top+=r.scrollTop;n.left+=r.scrollLeft}else{n.top+=window.pageYOffset;n.left+=window.pageXOffset}}return n};function V(e){return e.textContent||e.innerText||e.nodeValue||""}function K(e,t){return e.line==t.line&&e.ch==t.ch}function F(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function j(e){return{line:e.line,ch:e.ch}}var G=document.createElement("pre");function Y(e){G.textContent=e;return G.innerHTML}if(Y("a")=="\na")Y=function(e){G.textContent=e;return G.innerHTML.slice(1)};else if(Y("\t")!="\t")Y=function(e){G.innerHTML="";G.appendChild(document.createTextNode(e));return G.innerHTML};e.htmlEscape=Y;function _(e,t){if(!t)return e?e.length:0;if(!e)return t.length;for(var n=e.length,r=t.length;n>=0&&r>=0;--n,--r)if(e.charAt(n)!=t.charAt(r))break;return r+1}function q(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function X(e){return/\w/.test(e)||e.toUpperCase()!=e.toLowerCase()}var $="\n\nb".split(/\n/).length!=3?function(e){var t=0,n,r=[];while((n=e.indexOf("\n",t))>-1){r.push(e.slice(t,e.charAt(n-1)=="\r"?n-1:n));t=n+1}r.push(e.slice(t));return r}:function(e){return e.split(/\r?\n/)};e.splitLines=$;var Z=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return false}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}if(!t||t.parentElement()!=e)return false;return t.compareEndPoints("StartToEnd",t)!=0};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}});e.defineMIME("text/plain","null");var J={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};e.keyNames=J;(function(){for(var e=0;e<10;e++)J[e+48]=String(e);for(var e=65;e<=90;e++)J[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)J[e+111]=J[e+63235]="F"+e})();return e}();CodeMirror.defineMode("xml",function(e,t){var n=e.indentUnit;var r=t.htmlMode?{autoSelfClosers:{br:true,img:true,hr:true,link:true,input:true,meta:true,col:true,frame:true,base:true,area:true},doNotIndent:{pre:true},allowUnquoted:true}:{autoSelfClosers:{},doNotIndent:{},allowUnquoted:false};var i=t.alignCDATA;var l,o;function a(e,t){function n(n){t.tokenize=n;return n(e,t)}var r=e.next();if(r=="<"){if(e.eat("!")){if(e.eat("[")){if(e.match("CDATA["))return n(s("atom","]]>"));else return null}else if(e.match("--"))return n(s("comment","-->"));else if(e.match("DOCTYPE",true,true)){e.eatWhile(/[\w\._\-]/);return n(c(1))}else return null}else if(e.eat("?")){e.eatWhile(/[\w\._\-]/);t.tokenize=s("meta","?>");return"meta"}else{o=e.eat("/")?"closeTag":"openTag";e.eatSpace();l="";var i;while(i=e.eat(/[^\s\u00a0=<>\"\'\/?]/))l+=i;t.tokenize=f;return"tag"}}else if(r=="&"){e.eatWhile(/[^;]/);e.eat(";");return"atom"}else{e.eatWhile(/[^&<]/);return null}}function f(e,t){var n=e.next();if(n==">"||n=="/"&&e.eat(">")){t.tokenize=a;o=n==">"?"endTag":"selfcloseTag";return"tag"}else if(n=="="){o="equals";return null}else if(/[\'\"]/.test(n)){t.tokenize=u(n);return t.tokenize(e,t)}else{e.eatWhile(/[^\s\u00a0=<>\"\'\/?]/);return"word"}}function u(e){return function(t,n){while(!t.eol()){if(t.next()==e){n.tokenize=f;break}}return"string"}}function s(e,t){return function(n,r){while(!n.eol()){if(n.match(t)){r.tokenize=a;break}n.next()}return e}}function c(e){return function(t,n){var r;while((r=t.next())!=null){if(r=="<"){n.tokenize=c(e+1);return n.tokenize(t,n)}else if(r==">"){if(e==1){n.tokenize=a;break}else{n.tokenize=c(e-1);return n.tokenize(t,n)}}}return"meta"}}var h,d;function v(){for(var e=arguments.length-1;e>=0;e--)h.cc.push(arguments[e])}function p(){v.apply(null,arguments);return true}function m(e,t){var n=r.doNotIndent.hasOwnProperty(e)||h.context&&h.context.noIndent;h.context={prev:h.context,tagName:e,indent:h.indented,startOfLine:t,noIndent:n}}function g(){if(h.context)h.context=h.context.prev}function x(e){if(e=="openTag"){h.tagName=l;return p(w,y(h.startOfLine))}else if(e=="closeTag"){var t=false;if(h.context){t=h.context.tagName!=l}else{t=true}if(t)d="error";return p(k(t))}return p()}function y(e){return function(t){if(t=="selfcloseTag"||t=="endTag"&&r.autoSelfClosers.hasOwnProperty(h.tagName.toLowerCase()))return p();if(t=="endTag"){m(h.tagName,e);return p()}return p()}}function k(e){return function(t){if(e)d="error";if(t=="endTag"){g();return p()}d="error";return p(arguments.callee)}}function w(e){if(e=="word"){d="attribute";return p(w)}if(e=="equals")return p(C,w);if(e=="string"){d="error";return p(w)}return v()}function C(e){if(e=="word"&&r.allowUnquoted){d="string";return p()}if(e=="string")return p(M);return v()}function M(e){if(e=="string")return p(M);else return v()}return{startState:function(){return{tokenize:a,cc:[],indented:0,startOfLine:true,tagName:null,context:null}},token:function(e,t){if(e.sol()){t.startOfLine=true;t.indented=e.indentation()}if(e.eatSpace())return null;d=o=l=null;var n=t.tokenize(e,t);t.type=o;if((n||o)&&n!="comment"){h=t;while(true){var r=t.cc.pop()||x;if(r(o||n))break}}t.startOfLine=false;return d||n},indent:function(e,t,r){var l=e.context;if(e.tokenize!=f&&e.tokenize!=a||l&&l.noIndent)return r?r.match(/^(\s*)/)[0].length:0;if(i&&/<!\[CDATA\[/.test(t))return 0;if(l&&/^<\//.test(t))l=l.prev;while(l&&!l.startOfLine)l=l.prev;if(l)return l.indent+n;else return 0},compareStates:function(e,t){if(e.indented!=t.indented||e.tokenize!=t.tokenize)return false;for(var n=e.context,r=t.context;;n=n.prev,r=r.prev){if(!n||!r)return n==r;if(n.tagName!=r.tagName)return false}},electricChars:"/"}});CodeMirror.defineMIME("application/xml","xml");CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true});CodeMirror.defineMode("javascript",function(e,t){var n=e.indentUnit;var r=t.json;var i=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c");var i=e("operator"),l={type:"atom",style:"atom"};return{if:t,while:t,with:t,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:r,delete:r,throw:r,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:i,typeof:i,instanceof:i,true:l,false:l,null:l,undefined:l,NaN:l,Infinity:l}}();var l=/[+\-*&%=<>!?|]/;function o(e,t,n){t.tokenize=n;return n(e,t)}function a(e,t){var n=false,r;while((r=e.next())!=null){if(r==t&&!n)return false;n=!n&&r=="\\"}return n}var f,u;function s(e,t,n){f=e;u=n;return t}function c(e,t){var n=e.next();if(n=='"'||n=="'")return o(e,t,h(n));else if(/[\[\]{}\(\),;\:\.]/.test(n))return s(n);else if(n=="0"&&e.eat(/x/i)){e.eatWhile(/[\da-f]/i);return s("number","number")}else if(/\d/.test(n)){e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return s("number","number")}else if(n=="/"){if(e.eat("*")){return o(e,t,d)}else if(e.eat("/")){e.skipToEnd();return s("comment","comment")}else if(t.reAllowed){a(e,"/");e.eatWhile(/[gimy]/);return s("regexp","string")}else{e.eatWhile(l);return s("operator",null,e.current())}}else if(n=="#"){e.skipToEnd();return s("error","error")}else if(l.test(n)){e.eatWhile(l);return s("operator",null,e.current())}else{e.eatWhile(/[\w\$_]/);var r=e.current(),f=i.propertyIsEnumerable(r)&&i[r];return f&&t.kwAllowed?s(f.type,f.style,r):s("variable","variable",r)}}function h(e){return function(t,n){if(!a(t,e))n.tokenize=c;return s("string","string")}}function d(e,t){var n=false,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=c;break}n=r=="*"}return s("comment","comment")}var v={atom:true,number:true,variable:true,string:true,regexp:true};function p(e,t,n,r,i,l){this.indented=e;this.column=t;this.type=n;this.prev=i;this.info=l;if(r!=null)this.align=r}function m(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return true}function g(e,t,n,i,l){var o=e.cc;x.state=e;x.stream=l;x.marked=null,x.cc=o;if(!e.lexical.hasOwnProperty("align"))e.lexical.align=true;while(true){var a=o.length?o.pop():r?T:z;if(a(n,i)){while(o.length&&o[o.length-1].lex)o.pop()();if(x.marked)return x.marked;if(n=="variable"&&m(e,i))return"variable-2";return t}}}var x={state:null,column:null,marked:null,cc:null};function y(){for(var e=arguments.length-1;e>=0;e--)x.cc.push(arguments[e])}function k(){y.apply(null,arguments);return true}function w(e){var t=x.state;if(t.context){x.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}var C={name:"this",next:{name:"arguments"}};function M(){if(!x.state.context)x.state.localVars=C;x.state.context={prev:x.state.context,vars:x.state.localVars}}function b(){x.state.localVars=x.state.context.vars;x.state.context=x.state.context.prev}function S(e,t){var n=function(){var n=x.state;n.lexical=new p(n.indented,x.stream.column(),e,null,n.lexical,t)};n.lex=true;return n}function L(){var e=x.state;if(e.lexical.prev){if(e.lexical.type==")")e.indented=e.lexical.indented;e.lexical=e.lexical.prev}}L.lex=true;function A(e){return function t(n){if(n==e)return k();else if(e==";")return y();else return k(arguments.callee)}}function z(e){if(e=="var")return k(S("vardef"),R,A(";"),L);if(e=="keyword a")return k(S("form"),T,z,L);if(e=="keyword b")return k(S("form"),z,L);if(e=="{")return k(S("}"),O,L);if(e==";")return k();if(e=="function")return k(F);if(e=="for")return k(S("form"),A("("),S(")"),U,A(")"),L,z,L);if(e=="variable")return k(S("stat"),N);if(e=="switch")return k(S("form"),T,S("}","switch"),A("{"),O,L,L);if(e=="case")return k(T,A(":"));if(e=="default")return k(A(":"));if(e=="catch")return k(S("form"),M,A("("),j,A(")"),z,L,b);return y(S("stat"),T,A(";"),L)}function T(e){if(v.hasOwnProperty(e))return k(W);if(e=="function")return k(F);if(e=="keyword c")return k(E);if(e=="(")return k(S(")"),T,A(")"),L,W);if(e=="operator")return k(T);if(e=="[")return k(S("]"),I(T,"]"),L,W);if(e=="{")return k(S("}"),I(D,"}"),L,W);return k()}function E(e){if(e.match(/[;\}\)\],]/))return y();return y(T)}function W(e,t){if(e=="operator"&&/\+\+|--/.test(t))return k(W);if(e=="operator")return k(T);if(e==";")return;if(e=="(")return k(S(")"),I(T,")"),L,W);if(e==".")return k(H,W);if(e=="[")return k(S("]"),T,A("]"),L,W)}function N(e){if(e==":")return k(L,z);return y(W,A(";"),L)}function H(e){if(e=="variable"){x.marked="property";return k()}}function D(e){if(e=="variable")x.marked="property";if(v.hasOwnProperty(e))return k(A(":"),T)}function I(e,t){function n(r){if(r==",")return k(e,n);if(r==t)return k();return k(A(t))}return function r(i){if(i==t)return k();else return y(e,n)}}function O(e){if(e=="}")return k();return y(z,O)}function R(e,t){if(e=="variable"){w(t);return k(P)}return k()}function P(e,t){if(t=="=")return k(T,P);if(e==",")return k(R)}function U(e){if(e=="var")return k(R,V);if(e==";")return y(V);if(e=="variable")return k(B);return y(V)}function B(e,t){if(t=="in")return k(T);return k(W,V)}function V(e,t){if(e==";")return k(K);if(t=="in")return k(T);return k(T,A(";"),K)}function K(e){if(e!=")")k(T)}function F(e,t){if(e=="variable"){w(t);return k(F)}if(e=="(")return k(S(")"),M,I(j,")"),L,z,b)}function j(e,t){if(e=="variable"){w(t);return k()}}return{startState:function(e){return{tokenize:c,reAllowed:true,kwAllowed:true,cc:[],lexical:new p((e||0)-n,0,"block",false),localVars:null,context:null,indented:0}},token:function(e,t){if(e.sol()){if(!t.lexical.hasOwnProperty("align"))t.lexical.align=false;t.indented=e.indentation()}if(e.eatSpace())return null;var n=t.tokenize(e,t);if(f=="comment")return n;t.reAllowed=f=="operator"||f=="keyword c"||f.match(/^[\[{}\(,;:]$/);t.kwAllowed=f!=".";return g(t,n,f,u,e)},indent:function(e,t){if(e.tokenize!=c)return 0;var r=t&&t.charAt(0),i=e.lexical,l=i.type,o=r==l;if(l=="vardef")return i.indented+4;else if(l=="form"&&r=="{")return i.indented;else if(l=="stat"||l=="form")return i.indented+n;else if(i.info=="switch"&&!o)return i.indented+(/^(?:case|default)\b/.test(t)?n:2*n);else if(i.align)return i.column+(o?0:1);else return i.indented+(o?0:n)},electricChars:":{}"}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:true});CodeMirror.defineMode("css",function(e){var t=e.indentUnit,n;function r(e,t){n=t;return e}function i(e,t){var n=e.next();if(n=="@"){e.eatWhile(/[\w\\\-]/);return r("meta",e.current())}else if(n=="/"&&e.eat("*")){t.tokenize=l;return l(e,t)}else if(n=="<"&&e.eat("!")){t.tokenize=o;return o(e,t)}else if(n=="=")r(null,"compare");else if((n=="~"||n=="|")&&e.eat("="))return r(null,"compare");else if(n=='"'||n=="'"){t.tokenize=a(n);return t.tokenize(e,t)}else if(n=="#"){e.eatWhile(/[\w\\\-]/);return r("atom","hash")}else if(n=="!"){e.match(/^\s*\w*/);return r("keyword","important")}else if(/\d/.test(n)){e.eatWhile(/[\w.%]/);return r("number","unit")}else if(/[,.+>*\/]/.test(n)){return r(null,"select-op")}else if(/[;{}:\[\]]/.test(n)){return r(null,n)}else{e.eatWhile(/[\w\\\-]/);return r("variable","variable")}}function l(e,t){var n=false,l;while((l=e.next())!=null){if(n&&l=="/"){t.tokenize=i;break}n=l=="*"}return r("comment","comment")}function o(e,t){var n=0,l;while((l=e.next())!=null){if(n>=2&&l==">"){t.tokenize=i;break}n=l=="-"?n+1:0}return r("comment","comment")}function a(e){return function(t,n){var l=false,o;while((o=t.next())!=null){if(o==e&&!l)break;l=!l&&o=="\\"}if(!l)n.tokenize=i;return r("string","string");
}}return{startState:function(e){return{tokenize:i,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;var r=t.tokenize(e,t);var i=t.stack[t.stack.length-1];if(n=="hash"&&i=="rule")r="atom";else if(r=="variable"){if(i=="rule")r="number";else if(!i||i=="@media{")r="tag"}if(i=="rule"&&/^[\{\};]$/.test(n))t.stack.pop();if(n=="{"){if(i=="@media")t.stack[t.stack.length-1]="@media{";else t.stack.push("{")}else if(n=="}")t.stack.pop();else if(n=="@media")t.stack.push("@media");else if(i=="{"&&n!="comment")t.stack.push("rule");return r},indent:function(e,n){var r=e.stack.length;if(/^\}/.test(n))r-=e.stack[e.stack.length-1]=="rule"?2:1;return e.baseIndent+r*t},electricChars:"}"}});CodeMirror.defineMIME("text/css","css");CodeMirror.defineMode("htmlmixed",function(e,t){var n=CodeMirror.getMode(e,{name:"xml",htmlMode:true});var r=CodeMirror.getMode(e,"javascript");var i=CodeMirror.getMode(e,"css");function l(e,t){var l=n.token(e,t.htmlState);if(l=="tag"&&e.current()==">"&&t.htmlState.context){if(/^script$/i.test(t.htmlState.context.tagName)){t.token=a;t.localState=r.startState(n.indent(t.htmlState,""));t.mode="javascript"}else if(/^style$/i.test(t.htmlState.context.tagName)){t.token=f;t.localState=i.startState(n.indent(t.htmlState,""));t.mode="css"}}return l}function o(e,t,n){var r=e.current();var i=r.search(t);if(i>-1)e.backUp(r.length-i);return n}function a(e,t){if(e.match(/^<\/\s*script\s*>/i,false)){t.token=l;t.curState=null;t.mode="html";return l(e,t)}return o(e,/<\/\s*script\s*>/,r.token(e,t.localState))}function f(e,t){if(e.match(/^<\/\s*style\s*>/i,false)){t.token=l;t.localState=null;t.mode="html";return l(e,t)}return o(e,/<\/\s*style\s*>/,i.token(e,t.localState))}return{startState:function(){var e=n.startState();return{token:l,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var t=CodeMirror.copyState(e.token==f?i:r,e.localState);return{token:e.token,localState:t,mode:e.mode,htmlState:CodeMirror.copyState(n,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,t){if(e.token==l||/^\s*<\//.test(t))return n.indent(e.htmlState,t);else if(e.token==a)return r.indent(e.localState,t);else return i.indent(e.localState,t)},compareStates:function(e,t){return n.compareStates(e.htmlState,t.htmlState)},electricChars:"/{}:"}});CodeMirror.defineMIME("text/html","htmlmixed");